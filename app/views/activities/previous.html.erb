<div class="calendar-page">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-md h-10" style="background-color: rgba(238, 238, 238, .3); height: 7vh;">
    <a class="navbar-brand" style="margin-top: -2vh;">day-by-day</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <p> | 
            <a class="home-button" data-method="get" href="/home"> home </a>
          </p>
        </li>
        <br>
        <li class="nav-item active">
          <p> | 
            <a data-toggle="modal" data-target="#editTripModal" class="edit-trip-button">edit trip</a>
          </p> 
        </li>
        <li class="nav-item active">
          <p> | </p> 
        </li>
      </ul>
      <div class="cal-top-buttons">
        <div class="logout-button-cal">
          <button type="button" class="btn btn-outline-dark" id="logout-button-cal"><%= link_to("logout", '/logout', :method => :post) %></button>
        </div>
      </div>    
    </div>
  </nav>
  <!-- end of Navbar -->
  <div class="cal-title">
    <h3 class="top-title"><%= @logged_in_user.name %>, this is your trip to <%=@this_trip.destination%></i></h3>
  </div>
  <!-- CALENDAR -->
    <button type="button" class="btn btn-outline-danger"><%= link_to 'previous', "/index/previous/#{@this_trip.id}", method: :post %></button>
<div class="sumiu">
    <%= month_calendar start_date_param: :my_date do |date | %>
    <div class="card">
      <div class="card-body">
        <div class="add-activities">
          <a class="card-link" data-toggle="modal" data-target="#newActivityModal" > <i class="fas fa-plus-circle"></i> </a>
        </div>
        <h5 class="cal-card-title"> <%= date.day %> </h5>
        <% @this_trip.activities.each do |activity| %>
          <% if date === activity.start_date %>
          <p class="activity-text" data-toggle="modal" data-target="#showActivityModal">
          <%= activity.time%>: <%= activity.title %>
          <!-- Show Activity Modal -->
          <div class="modal fade" id="showActivityModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                    <h3 class="modal-title"><%= activity.title%></h3><br>
                </div>
                <div class="modal-body">
                  <div class="container">
                    <p>start time: <%= activity.time%></p>
                    <p>description: <%= activity.description%></p>
                  </div>
                  <!-- Edit Activity Button -->
                  <div class="edit-activity-button">
                    <button type="button" class="btn btn-outline-dark" id="edit-activity-button" data-toggle="modal" data-target="#editActivityModal">edit activity</button>
                  </div>
                </div>
          <!-- Edit Activity Modal -->
          <div class="modal fade" id="editActivityModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                  <h5 class="modal-title" id="exampleModalLabel">edit your trip</h5>
                </div>
                <div class="modal-body">
                  <div class="container">
                  <%= form_with(url: "/index/edit_activity/#{@this_trip.id}/#{activity.id}", method: "post") do %>
                    <div class="row">
                      <div class="col-md-0 mx-auto">
                        <div class="myform form">
                          <form>
                            <div class="form-group">
                              <input type="text" name="title"  class="form-control my-input" id="title" placeholder="title" value="<%= activity.title %>">
                            </div>
                            <div class="form-group">
                              <input type="time" name="time"  class="form-control my-input" id="time" value="<%= activity.time %>">
                            </div>
                            <div class="form-group">
                              <input type="text" name="description"  class="form-control my-input" id="description" placeholder="description" value="<%= activity.description %>">
                            </div>
                            <div class="form-group">
                              <input type="date" name="start_date"  class="form-control my-input" id="start_date" value="<%= activity.start_date %>">
                            </div>
                            <div class="form-group">
                              <input type="date" name="end_date"  class="form-control my-input" id="end_date" value="<%= activity.end_date %>">
                            </div>
                            <button type="submit" class="btn btn-secondary">edit</button>
                            <button type="button" class="btn btn-outline-danger"><%= link_to 'delete', "/index/delete_activity/#{@this_trip.id}/#{activity.id}", method: :delete, data: { confirm: 'Are you sure?' } %></button>
                          </form>
                        </div>
                      </div>
                    </div>
                  <% end %>
                  </div>
                </div>
              </div>
            </div>
          <div>
                <!-- end of Edit Activity Modal -->
                    </div>
                  </div>
              </div>
            </div>
          </div>
          <!-- end of Show Activity Modal -->
          <% end %>
        <% end %>
      </div>
    </div>
    <% end %>
  </p>
  <!-- end of CALENDAR -->
</div>
<!-- Add Activity Modal -->
<div class="modal fade" id="newActivityModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h5 class="modal-title" id="exampleModalLabel">add new activity</h5>
      </div>
      <div class="modal-body">
        <div class="container">
          <%= form_with(url: "/new/activities/#{(@this_trip.id).to_i}", method: "post") do %>
          <div class="row">
            <div class="col-md-0 mx-auto">
              <div class="myform form">
                <form>
                  <div class="form-group">
                    <input type="text" name="title"  class="form-control my-input" id="title" placeholder="title" required>
                  </div>
                  <div class="form-group">
                    <input type="time" name="time"  class="form-control my-input" id="time" placeholder="time" required>
                  </div>
                  <div class="form-group">
                    <input type="text" name="description"  class="form-control my-input" id="description" placeholder="description" required>
                  </div>
                  <div class="form-group">
                    <input type="date" name="start_date"  class="form-control my-input" id="start_date" placeholder="start date" required>
                  </div>
                  <div class="form-group">
                    <input type="date" name="end_date"  class="form-control my-input" id="end_date" placeholder="end date" required>
                  </div>
                  <div class="buttons">
                    <button type="submit" class="btn btn-secondary" id="create-button">add activity</button>
                  </div>
                </form>
                  </div> 
                </div>
              </div>
            </div>
          </div>
          <% end %>
        </div>
      <div>
    </div>
  </div>
</div>
</div>
<!-- end of Add Activity Modal -->
<!-- Edit Trip Modal -->
<div class="modal fade" id="editTripModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h5 class="modal-title" id="exampleModalLabel">edit your trip</h5>
      </div>
      <div class="modal-body">
        <div class="container">
          <%= form_with(url: "/index/edit_trip/#{@this_trip.id}", method: "post") do %>
          <div class="row">
            <div class="col-md-0 mx-auto">
              <div class="myform form">
                <form>
                  <div class="form-group">
                    <input type="text" name="destination"  class="form-control my-input" id="destination" value="<%= @this_trip.destination%>">
                  </div>
                  <div class="form-group">
                    <input type="date" name="start_date"  class="form-control my-input" id="start_date" value="<%= @this_trip.start_date%>">
                  </div>
                  <div class="form-group">
                    <input type="date" name="end_date"  class="form-control my-input" id="description" placeholder="description" required>
                  </div>
                  <button type="submit" class="btn btn-secondary">edit</button>
                  <button type="button" class="btn btn-outline-danger">
                    <%= link_to 'delete', "/index/delete_trip/#{@this_trip.id}", method: :delete, data: { confirm: 'Are you sure?' } %>
                  </button>
                </form>
              </div>
            </div>
          </div>
        <% end %>
        </div>
      </div>
    </div>
  <div>
</div>
<!-- end of Edit Trip Modal -->




